<style>
    .modal-table {
        width: 100%;
        border-collapse: collapse;
    }

    .modal-table th,
    .modal-table td {
        padding: 12px 14px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
    }

    .modal-table td.n {
        text-align: right;
        font-variant-numeric: tabular-nums;
    }

    .modal-table th {
        background: rgba(66, 99, 235, 0.15);
        color: #e8eaed;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 12px;
        letter-spacing: 0.5px;
        border-bottom: 1px solid rgba(66, 99, 235, 0.3);
    }

    .modal-table tbody tr {
        background: transparent;
        transition: background 0.2s ease;
    }

    .modal-table tbody tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.02);
    }

    .modal-table tbody tr:hover {
        background: rgba(66, 99, 235, 0.1);
    }

    .modal-table td {
        color: #c9cdd4;
    }

    /* Tabs */
    .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        padding-bottom: 0;
    }

    .tab-btn {
        padding: 10px 16px;
        border: none;
        background: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        color: #8892a0;
        border-bottom: 2px solid transparent;
        margin-bottom: -1px;
        transition: color 0.2s ease, border-color 0.2s ease;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .tab-btn:hover {
        color: #c9cdd4;
    }

    .tab-btn.active {
        color: #4263eb;
        border-bottom-color: #4263eb;
    }

    .tab-btn.blue.active {
        color: #60a5fa;
        border-bottom-color: #60a5fa;
        text-shadow: 0 0 10px rgba(96, 165, 250, 0.4);
    }

    .tab-btn.neutral.active {
        color: #9ca3af;
        border-bottom-color: #9ca3af;
    }

    .tab-btn.red.active {
        color: #f87171;
        border-bottom-color: #f87171;
        text-shadow: 0 0 10px rgba(248, 113, 113, 0.4);
    }

    .tab-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 20px;
        height: 20px;
        padding: 0 6px;
        border-radius: 10px;
        font-size: 12px;
        font-weight: 600;
        color: white;
    }

    .tab-btn.blue .tab-badge {
        background: linear-gradient(145deg, #4263eb 0%, #3451c9 100%);
        box-shadow: 0 2px 8px rgba(66, 99, 235, 0.4);
    }

    .tab-btn.neutral .tab-badge {
        background: linear-gradient(145deg, #6b7280 0%, #4b5563 100%);
        box-shadow: 0 2px 8px rgba(107, 114, 128, 0.4);
    }

    .tab-btn.red .tab-badge {
        background: linear-gradient(145deg, #ef4444 0%, #dc2626 100%);
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    .empty-state {
        text-align: center;
        color: #5a6270;
        padding: 40px 20px;
    }

    /* Progress bar */
    .progress-container {
        margin-bottom: 24px;
    }

    .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
    }

    .progress-label {
        font-size: 14px;
        color: #c9cdd4;
        font-weight: 500;
    }

    .progress-value {
        font-size: 14px;
        color: #60a5fa;
        font-weight: 600;
    }

    .progress-bar {
        height: 12px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #4263eb 0%, #60a5fa 100%);
        border-radius: 6px;
        transition: width 0.3s ease;
    }
</style>

{% set blue_zones = [] %}
{% set neutral_zones = [] %}
{% set red_zones = [] %}

{% for name, zone in sitac.zones.items() | sort %}
    {% if zone.side == 2 %}
        {% set _ = blue_zones.append((name, zone)) %}
    {% elif zone.side == 1 %}
        {% set _ = red_zones.append((name, zone)) %}
    {% else %}
        {% set _ = neutral_zones.append((name, zone)) %}
    {% endif %}
{% endfor %}

<h2>Objectives</h2>

<div class="progress-container">
    <div class="progress-header">
        <span class="progress-label">Campaign Progress</span>
        <span class="progress-value">{{ "%.0f"|format(progress) }}%</span>
    </div>
    <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress }}%"></div>
    </div>
</div>

<div class="tabs">
    <button class="tab-btn blue active" onclick="showTab('blue')">
        Blue <span class="tab-badge">{{ blue_zones | length }}</span>
    </button>
    <button class="tab-btn neutral" onclick="showTab('neutral')">
        Neutral <span class="tab-badge">{{ neutral_zones | length }}</span>
    </button>
    <button class="tab-btn red" onclick="showTab('red')">
        Red <span class="tab-badge">{{ red_zones | length }}</span>
    </button>
</div>

<div id="tab-blue" class="tab-content active">
    {% if blue_zones %}
    <table class="modal-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Level</th>
                <th>Upgrades Used</th>
                <th>Active</th>
            </tr>
        </thead>
        <tbody>
            {% for name, zone in blue_zones %}
            <tr>
                <td>{{ name }}</td>
                <td class="n">{{ zone.level }}</td>
                <td class="n">{{ zone.upgradesUsed }}</td>
                <td>{{ 'Yes' if zone.active else 'No' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">No blue zones</div>
    {% endif %}
</div>

<div id="tab-neutral" class="tab-content">
    {% if neutral_zones %}
    <table class="modal-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Level</th>
                <th>Upgrades Used</th>
                <th>Active</th>
            </tr>
        </thead>
        <tbody>
            {% for name, zone in neutral_zones %}
            <tr>
                <td>{{ name }}</td>
                <td class="n">{{ zone.level }}</td>
                <td class="n">{{ zone.upgradesUsed }}</td>
                <td>{{ 'Yes' if zone.active else 'No' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">No neutral zones</div>
    {% endif %}
</div>

<div id="tab-red" class="tab-content">
    {% if red_zones %}
    <table class="modal-table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Level</th>
                <th>Upgrades Used</th>
                <th>Active</th>
            </tr>
        </thead>
        <tbody>
            {% for name, zone in red_zones %}
            <tr>
                <td>{{ name }}</td>
                <td class="n">{{ zone.level }}</td>
                <td class="n">{{ zone.upgradesUsed }}</td>
                <td>{{ 'Yes' if zone.active else 'No' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">No red zones</div>
    {% endif %}
</div>

<script>
window.showTab = function(tabName) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));

    // Show selected tab
    document.getElementById('tab-' + tabName).classList.add('active');
    document.querySelector('.tab-btn.' + tabName).classList.add('active');
};
</script>
